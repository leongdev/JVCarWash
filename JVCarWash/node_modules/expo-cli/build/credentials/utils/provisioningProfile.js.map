{"version":3,"sources":["../../../src/credentials/utils/provisioningProfile.ts"],"names":["readAppleTeam","dataBase64","profilePlist","buffer","Buffer","from","profile","toString","plist","parse","error","Error","teamId","teamName"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAOA,SAASA,aAAT,CAAuBC,UAAvB,EAAsD;AAAA;;AACpD,MAAIC,YAAJ;;AACA,MAAI;AACF,UAAMC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYJ,UAAZ,EAAwB,QAAxB,CAAf;AACA,UAAMK,OAAO,GAAGH,MAAM,CAACI,QAAP,CAAgB,OAAhB,CAAhB;AACAL,IAAAA,YAAY,GAAGM,iBAAMC,KAAN,CAAYH,OAAZ,CAAf;AACD,GAJD,CAIE,OAAOI,KAAP,EAAc;AACd,UAAM,IAAIC,KAAJ,CAAU,mCAAV,CAAN;AACD;;AACD,QAAMC,MAAM,WAAIV,YAAY,CAAC,gBAAD,CAAhB,yCAAG,KAAiD,CAAjD,CAAf;AACA,QAAMW,QAAQ,GAAGX,YAAY,CAAC,UAAD,CAA7B;;AACA,MAAI,CAACU,MAAL,EAAa;AACX,UAAM,IAAID,KAAJ,CAAU,qDAAV,CAAN;AACD;;AACD,SAAO;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAAP;AACD;;eAEc;AAAEb,EAAAA;AAAF,C","sourcesContent":["import plist, { PlistArray, PlistObject } from '@expo/plist';\n\ninterface AppleTeam {\n  teamId: string;\n  teamName: string;\n}\n\nfunction readAppleTeam(dataBase64: string): AppleTeam {\n  let profilePlist;\n  try {\n    const buffer = Buffer.from(dataBase64, 'base64');\n    const profile = buffer.toString('utf-8');\n    profilePlist = plist.parse(profile) as PlistObject;\n  } catch (error) {\n    throw new Error('Provisioning profile is malformed');\n  }\n  const teamId = (profilePlist['TeamIdentifier'] as PlistArray)?.[0] as string;\n  const teamName = profilePlist['TeamName'] as string;\n  if (!teamId) {\n    throw new Error('Team identifier is missing from provisoning profile');\n  }\n  return { teamId, teamName };\n}\n\nexport default { readAppleTeam };\n"],"file":"provisioningProfile.js"}