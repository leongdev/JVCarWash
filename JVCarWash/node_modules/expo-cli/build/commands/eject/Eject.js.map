{"version":3,"sources":["../../../src/commands/eject/Eject.ts"],"names":["ejectAsync","projectRoot","options","createNativeProjectsFromTemplateAsync","installNodeModulesAsync","configureIOSStepAsync","configureAndroidStepAsync","podsInstalled","CreateApp","installCocoaPodsAsync","warnIfDependenciesRequireAdditionalSetupAsync","log","newLine","nested","chalk","bold","WarningAggregator","hasWarningsIOS","hasWarningsAndroid","fallback","text","packageManager","PackageManager","isUsingYarn","applyingIOSConfigStep","logNewSection","ConfigWarningAggregator","stopAndPersist","symbol","red","succeed","installingDependenciesStep","fse","remove","createForProject","silent","installAsync","e","fail","name","toLowerCase","process","exit","applyingAndroidConfigStep","exp","pkg","config","dynamicConfigPath","staticConfigPath","JsonFile","writeAsync","path","join","expo","json5","error","console","message","sdkMajorVersionNumber","semver","major","sdkVersion","templateSpec","pacote","manifest","code","Error","promptForNativeAppNameAsync","packageName","android","package","bundleIdentifier","ios","entryPoint","updatingAppConfigStep","writeFile","resolve","JSON","stringify","defaultDependencies","defaultDevDependencies","creatingNativeProjectStep","tempDir","temporary","directory","Exp","extractTemplateAppAsync","copySync","mergeGitIgnoreFiles","dependencies","devDependencies","read","createDependenciesMap","yellow","updatingMetroConfigStep","existsSync","metro","updatingPackageJsonStep","scripts","eject","start","combinedDependencies","dependenciesKey","combinedDevDependencies","removedPkgMain","isPkgMainExpoAppEntry","main","outputMap","key","Object","keys","value","result","default","validate","length","nonInteractiveHelp","targetGitIgnorePath","sourceGitIgnorePath","targetGitIgnore","readFileSync","toString","sourceGitIgnore","merged","mergeGitIgnoreContents","writeFileSync","skipSDKVersionRequirement","pkgsWithExtraSetup","readAsync","packagesToWarn","filter","pkgName","warnAdditionalSetupStep","plural","forEach","stripDashes","s","replace","input","startsWith","includes"],"mappings":"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","sourcesContent":["import {\n  WarningAggregator as ConfigWarningAggregator,\n  ExpoConfig,\n  PackageJSONConfig,\n  WarningAggregator,\n  getConfig,\n  resolveModule,\n} from '@expo/config';\nimport JsonFile from '@expo/json-file';\nimport * as PackageManager from '@expo/package-manager';\nimport { Exp } from '@expo/xdl';\nimport chalk from 'chalk';\nimport fse from 'fs-extra';\nimport npmPackageArg from 'npm-package-arg';\nimport pacote from 'pacote';\nimport path from 'path';\nimport semver from 'semver';\nimport temporary from 'tempy';\nimport terminalLink from 'terminal-link';\n\nimport log from '../../log';\nimport prompt from '../../prompt';\nimport configureAndroidProjectAsync from '../apply/configureAndroidProjectAsync';\nimport configureIOSProjectAsync from '../apply/configureIOSProjectAsync';\nimport * as CreateApp from '../utils/CreateApp';\nimport { usesOldExpoUpdatesAsync } from '../utils/ProjectUtils';\nimport { learnMore } from '../utils/TerminalLink';\nimport { logConfigWarningsAndroid, logConfigWarningsIOS } from '../utils/logConfigWarnings';\nimport maybeBailOnGitStatusAsync from '../utils/maybeBailOnGitStatusAsync';\nimport { getOrPromptForBundleIdentifier, getOrPromptForPackage } from './ConfigValidation';\n\ntype ValidationErrorMessage = string;\n\ntype DependenciesMap = { [key: string]: string | number };\n\nexport type EjectAsyncOptions = {\n  verbose?: boolean;\n  force?: boolean;\n  packageManager?: 'npm' | 'yarn';\n};\n\n/**\n * Entry point into the eject process, delegates to other helpers to perform various steps.\n *\n * 1. Verify git is clean\n * 2. Create native projects (ios, android)\n * 3. Install node modules\n * 4. Apply config to native projects\n * 5. Install CocoaPods\n * 6. Log project info\n */\nexport async function ejectAsync(projectRoot: string, options?: EjectAsyncOptions): Promise<void> {\n  if (await maybeBailOnGitStatusAsync()) return;\n\n  await createNativeProjectsFromTemplateAsync(projectRoot);\n  await installNodeModulesAsync(projectRoot);\n\n  // Apply Expo config to native projects\n  await configureIOSStepAsync(projectRoot);\n  await configureAndroidStepAsync(projectRoot);\n\n  const podsInstalled = await CreateApp.installCocoaPodsAsync(projectRoot);\n  await warnIfDependenciesRequireAdditionalSetupAsync(projectRoot);\n\n  log.newLine();\n  log.nested(`➡️  ${chalk.bold('Next steps')}`);\n\n  if (WarningAggregator.hasWarningsIOS() || WarningAggregator.hasWarningsAndroid()) {\n    log.nested(\n      `- 👆 Review the logs above and look for any warnings (⚠️ ) that might need follow-up.`\n    );\n  }\n  log.nested(\n    `- 💡 You may want to run ${chalk.bold(\n      'npx @react-native-community/cli doctor'\n    )} to help install any tools that your app may need to run your native projects.`\n  );\n  if (!podsInstalled) {\n    log.nested(\n      `- 🍫 When CocoaPods is installed, initialize the project workspace: ${chalk.bold(\n        'npx pod-install'\n      )}`\n    );\n  }\n  log.nested(\n    `- 🔑 Download your Android keystore (if you're not sure if you need to, just run the command and see): ${chalk.bold(\n      'expo fetch:android:keystore'\n    )}`\n  );\n\n  if (await usesOldExpoUpdatesAsync(projectRoot)) {\n    log.nested(\n      `- 🚀 ${\n        (terminalLink(\n          'expo-updates',\n          'https://github.com/expo/expo/blob/master/packages/expo-updates/README.md'\n        ),\n        { fallback: (text: string) => text })\n      } has been configured in your project. Before you do a release build, make sure you run ${chalk.bold(\n        'expo publish'\n      )}. ${learnMore('https://expo.fyi/release-builds-with-expo-updates')}`\n    );\n  }\n\n  log.newLine();\n  log.nested(`☑️  ${chalk.bold('When you are ready to run your project')}`);\n  log.nested(\n    'To compile and run your project in development, execute one of the following commands:'\n  );\n  const packageManager = PackageManager.isUsingYarn(projectRoot) ? 'yarn' : 'npm';\n  log.nested(`- ${chalk.bold(packageManager === 'npm' ? 'npm run ios' : 'yarn ios')}`);\n  log.nested(`- ${chalk.bold(packageManager === 'npm' ? 'npm run android' : 'yarn android')}`);\n  log.nested(`- ${chalk.bold(packageManager === 'npm' ? 'npm run web' : 'yarn web')}`);\n}\n\nasync function configureIOSStepAsync(projectRoot: string) {\n  log.newLine();\n  const applyingIOSConfigStep = CreateApp.logNewSection('Applying iOS configuration');\n  await configureIOSProjectAsync(projectRoot);\n  if (ConfigWarningAggregator.hasWarningsIOS()) {\n    applyingIOSConfigStep.stopAndPersist({\n      symbol: '⚠️ ',\n      text: chalk.red('iOS configuration applied with warnings that should be fixed:'),\n    });\n    logConfigWarningsIOS();\n  } else {\n    applyingIOSConfigStep.succeed('All project configuration applied to iOS project');\n  }\n  log.newLine();\n}\n\n/**\n * Wraps PackageManager to install node modules and adds CLI logs.\n *\n * @param projectRoot\n */\nasync function installNodeModulesAsync(projectRoot: string) {\n  const installingDependenciesStep = CreateApp.logNewSection('Installing JavaScript dependencies.');\n  await fse.remove('node_modules');\n  const packageManager = PackageManager.createForProject(projectRoot, { log, silent: true });\n  try {\n    await packageManager.installAsync();\n    installingDependenciesStep.succeed('Installed JavaScript dependencies.');\n  } catch (e) {\n    installingDependenciesStep.fail(\n      chalk.red(\n        `Something when wrong installing JavaScript dependencies, check your ${\n          packageManager.name\n        } logfile or run ${chalk.bold(\n          `${packageManager.name.toLowerCase()} install`\n        )} again manually.`\n      )\n    );\n    // TODO: actually show the error message from the package manager! :O\n    process.exit(1);\n  }\n}\n\nasync function configureAndroidStepAsync(projectRoot: string) {\n  const applyingAndroidConfigStep = CreateApp.logNewSection('Applying Android configuration');\n  await configureAndroidProjectAsync(projectRoot);\n  if (ConfigWarningAggregator.hasWarningsAndroid()) {\n    applyingAndroidConfigStep.stopAndPersist({\n      symbol: '⚠️ ',\n      text: chalk.red('Android configuration applied with warnings that should be fixed:'),\n    });\n    logConfigWarningsAndroid();\n  } else {\n    applyingAndroidConfigStep.succeed('All project configuration applied to Android project');\n  }\n}\n\nasync function createNativeProjectsFromTemplateAsync(projectRoot: string): Promise<void> {\n  // We need the SDK version to proceed\n\n  let exp: ExpoConfig;\n  let pkg: PackageJSONConfig;\n  try {\n    const config = getConfig(projectRoot);\n    exp = config.exp;\n    pkg = config.pkg;\n\n    // If no config exists in the file system then we should generate one so the process doesn't fail.\n    if (!config.dynamicConfigPath && !config.staticConfigPath) {\n      // Don't check for a custom config path because the process should fail if a custom file doesn't exist.\n      // Write the generated config.\n      // writeConfigJsonAsync(projectRoot, config.exp);\n      await JsonFile.writeAsync(\n        path.join(projectRoot, 'app.json'),\n        { expo: config.exp },\n        { json5: false }\n      );\n    }\n  } catch (error) {\n    // TODO(Bacon): Currently this is already handled in the command\n    console.log();\n    console.log(chalk.red(error.message));\n    console.log();\n    process.exit(1);\n  }\n\n  // Validate that the template exists\n  const sdkMajorVersionNumber = semver.major(exp.sdkVersion!);\n  const templateSpec = npmPackageArg(`expo-template-bare-minimum@sdk-${sdkMajorVersionNumber}`);\n  try {\n    await pacote.manifest(templateSpec);\n  } catch (e) {\n    if (e.code === 'E404') {\n      throw new Error(\n        `Unable to eject because an eject template for SDK ${sdkMajorVersionNumber} was not found.`\n      );\n    } else {\n      throw e;\n    }\n  }\n\n  /**\n   * Set names to be used for the native projects and configure appEntry so users can continue\n   * to use Expo client on ejected projects, even though we change the \"main\" to index.js for bare.\n   */\n  if (!exp.name) {\n    exp.name = await promptForNativeAppNameAsync(exp);\n  }\n\n  // Prompt for the Android package first because it's more strict than the bundle identifier\n  // this means you'll have a better chance at matching the bundle identifier with the package name.\n  const packageName = await getOrPromptForPackage(projectRoot);\n  exp.android = exp.android ?? {};\n  exp.android.package = packageName;\n\n  const bundleIdentifier = await getOrPromptForBundleIdentifier(projectRoot);\n  exp.ios = exp.ios ?? {};\n  exp.ios.bundleIdentifier = bundleIdentifier;\n\n  if (exp.entryPoint) {\n    delete exp.entryPoint;\n    log(`- expo.entryPoint is not needed and has been removed.`);\n  }\n\n  const updatingAppConfigStep = CreateApp.logNewSection('Updating app configuration (app.json)');\n  await fse.writeFile(path.resolve('app.json'), JSON.stringify({ expo: exp }, null, 2));\n  // TODO: if app.config.js, need to provide some other info here\n  updatingAppConfigStep.succeed('App configuration (app.json) updated.');\n\n  /**\n   * Extract the template and copy the ios and android directories over to the project directory\n   */\n  let defaultDependencies: any = {};\n  let defaultDevDependencies: any = {};\n  // NOTE(brentvatne): Removing spaces between steps for now, add back when\n  // there is some additional context for steps\n  // log.newLine();\n  const creatingNativeProjectStep = CreateApp.logNewSection(\n    'Creating native project directories (./ios and ./android) and updating .gitignore'\n  );\n  let tempDir;\n  try {\n    tempDir = temporary.directory();\n    await Exp.extractTemplateAppAsync(templateSpec, tempDir, exp);\n    fse.copySync(path.join(tempDir, 'ios'), path.join(projectRoot, 'ios'));\n    fse.copySync(path.join(tempDir, 'android'), path.join(projectRoot, 'android'));\n    fse.copySync(path.join(tempDir, 'index.js'), path.join(projectRoot, 'index.js'));\n    mergeGitIgnoreFiles(path.join(projectRoot, '.gitignore'), path.join(tempDir, '.gitignore'));\n    const { dependencies, devDependencies } = JsonFile.read(path.join(tempDir, 'package.json'));\n    defaultDependencies = createDependenciesMap(dependencies);\n    defaultDevDependencies = createDependenciesMap(devDependencies);\n    creatingNativeProjectStep.succeed(\n      'Created native project directories (./ios and ./android) and updated .gitignore.'\n    );\n  } catch (e) {\n    log(chalk.red(e.message));\n    creatingNativeProjectStep.fail(\n      'Failed to create the native project - see the output above for more information.'\n    );\n    log(\n      chalk.yellow(\n        'You may want to delete the `./ios` and/or `./android` directories before running eject again.'\n      )\n    );\n    process.exit(1);\n  }\n\n  /**\n   * Add metro config, or warn if metro config already exists. The developer will need to add the\n   * hashAssetFiles plugin manually.\n   */\n\n  const updatingMetroConfigStep = CreateApp.logNewSection('Adding Metro bundler configuration');\n  try {\n    if (\n      fse.existsSync(path.join(projectRoot, 'metro.config.js')) ||\n      fse.existsSync(path.join(projectRoot, 'metro.config.json')) ||\n      pkg.metro ||\n      fse.existsSync(path.join(projectRoot, 'rn-cli.config.js'))\n    ) {\n      throw new Error('Existing Metro configuration found; not overwriting.');\n    }\n\n    fse.copySync(path.join(tempDir, 'metro.config.js'), path.join(projectRoot, 'metro.config.js'));\n    updatingMetroConfigStep.succeed('Added Metro bundler configuration.');\n  } catch (e) {\n    updatingMetroConfigStep.stopAndPersist({\n      symbol: '⚠️ ',\n      text: chalk.red('Metro bundler configuration not applied:'),\n    });\n    log.nested(`- ${e.message}`);\n    log.nested(\n      `- You will need to add the ${chalk.bold(\n        'hashAssetFiles'\n      )} plugin to your Metro configuration. ${terminalLink(\n        'Example.',\n        'https://github.com/expo/expo/blob/master/packages/expo-updates/README.md#metroconfigjs'\n      )}`\n    );\n    log.newLine();\n  }\n\n  /**\n   * Update package.json scripts - `npm start` should default to `react-native\n   * start` rather than `expo start` after ejecting, for example.\n   */\n  // NOTE(brentvatne): Removing spaces between steps for now, add back when\n  // there is some additional context for steps\n  // log.newLine();\n  const updatingPackageJsonStep = CreateApp.logNewSection(\n    'Updating your package.json scripts, dependencies, and main file'\n  );\n  if (!pkg.scripts) {\n    pkg.scripts = {};\n  }\n  delete pkg.scripts.eject;\n  pkg.scripts.start = 'react-native start';\n  pkg.scripts.ios = 'react-native run-ios';\n  pkg.scripts.android = 'react-native run-android';\n\n  /**\n   * Update package.json dependencies by combining the dependencies in the project we are ejecting\n   * with the dependencies in the template project. Does the same for devDependencies.\n   *\n   * - The template may have some dependencies beyond react/react-native/react-native-unimodules,\n   *   for example RNGH and Reanimated. We should prefer the version that is already being used\n   *   in the project for those, but swap the react/react-native/react-native-unimodules versions\n   *   with the ones in the template.\n   * - The same applies to expo-updates -- since some native project configuration may depend on the\n   *   version, we should always use the version of expo-updates in the template.\n   */\n\n  const combinedDependencies: DependenciesMap = createDependenciesMap({\n    ...defaultDependencies,\n    ...pkg.dependencies,\n  });\n\n  for (const dependenciesKey of [\n    'react',\n    'react-native-unimodules',\n    'react-native',\n    'expo-updates',\n  ]) {\n    combinedDependencies[dependenciesKey] = defaultDependencies[dependenciesKey];\n  }\n  const combinedDevDependencies: DependenciesMap = createDependenciesMap({\n    ...defaultDevDependencies,\n    ...pkg.devDependencies,\n  });\n\n  // Save the dependencies\n  pkg.dependencies = combinedDependencies;\n  pkg.devDependencies = combinedDevDependencies;\n\n  /**\n   * Add new app entry points\n   */\n  let removedPkgMain;\n  // Check that the pkg.main doesn't match:\n  // - ./node_modules/expo/AppEntry\n  // - ./node_modules/expo/AppEntry.js\n  // - node_modules/expo/AppEntry.js\n  // - expo/AppEntry.js\n  // - expo/AppEntry\n  if (!isPkgMainExpoAppEntry(pkg.main) && pkg.main !== 'index.js' && pkg.main) {\n    // Save the custom\n    removedPkgMain = pkg.main;\n  }\n  delete pkg.main;\n  await fse.writeFile(path.resolve('package.json'), JSON.stringify(pkg, null, 2));\n\n  updatingPackageJsonStep.succeed(\n    'Updated package.json and added index.js entry point for iOS and Android.'\n  );\n  if (removedPkgMain) {\n    log(\n      `- Removed ${chalk.bold(\n        `\"main\": \"${removedPkgMain}\"`\n      )} from package.json because we recommend using index.js as main instead.`\n    );\n    log.newLine();\n  }\n}\n\n/**\n * Create an object of type DependenciesMap a dependencies object or throw if not valid.\n *\n * @param dependencies - ideally an object of type {[key]: string} - if not then this will error.\n */\nfunction createDependenciesMap(dependencies: any): DependenciesMap {\n  if (typeof dependencies !== 'object') {\n    throw new Error(`Dependency map is invalid, expected object but got ${typeof dependencies}`);\n  }\n\n  const outputMap: DependenciesMap = {};\n  if (!dependencies) return outputMap;\n\n  for (const key of Object.keys(dependencies)) {\n    const value = dependencies[key];\n    if (typeof value === 'string') {\n      outputMap[key] = value;\n    } else {\n      throw new Error(\n        `Dependency for key \\`${key}\\` should be a \\`string\\`, instead got: \\`{ ${key}: ${JSON.stringify(\n          value\n        )} }\\``\n      );\n    }\n  }\n  return outputMap;\n}\n\nasync function promptForNativeAppNameAsync({ name }: Pick<ExpoConfig, 'name'>): Promise<string> {\n  log('First, we want to clarify what names we should use for your app:');\n  const result = await prompt(\n    [\n      {\n        name: 'name',\n        message: \"What should your app appear as on a user's home screen?\",\n        default: name,\n        validate({ length }: string): true | ValidationErrorMessage {\n          return length ? true : 'App display name cannot be empty.';\n        },\n      },\n    ],\n    {\n      nonInteractiveHelp: 'Please specify \"expo.name\" in app.json / app.config.js.',\n    }\n  );\n\n  log.newLine();\n\n  return result.name;\n}\n\n/**\n * Merge two gitignore files together and add a generated header.\n *\n * @param targetGitIgnorePath\n * @param sourceGitIgnorePath\n */\nexport function mergeGitIgnoreFiles(\n  targetGitIgnorePath: string,\n  sourceGitIgnorePath: string\n): string | null {\n  if (!fse.existsSync(targetGitIgnorePath)) {\n    // No gitignore in the project already, no need to merge anything into anything. I guess they\n    // are not using git :O\n    return null;\n  }\n\n  if (!fse.existsSync(sourceGitIgnorePath)) {\n    // Maybe we don't have a gitignore in the template project\n    return null;\n  }\n\n  const targetGitIgnore = fse.readFileSync(targetGitIgnorePath).toString();\n  const sourceGitIgnore = fse.readFileSync(sourceGitIgnorePath).toString();\n  const merged = mergeGitIgnoreContents(targetGitIgnore, sourceGitIgnore);\n  fse.writeFileSync(targetGitIgnorePath, merged);\n\n  return merged;\n}\n\n/**\n * Merge the contents of two gitignores together and add a generated header.\n *\n * @param targetGitIgnore contents of the existing gitignore\n * @param sourceGitIgnore contents of the extra gitignore\n */\nfunction mergeGitIgnoreContents(targetGitIgnore: string, sourceGitIgnore: string): string {\n  // TODO(Bacon): Add version this section with a tag (expo-cli@x.x.x)\n  return `${targetGitIgnore}\n# The following contents were automatically generated by expo-cli during eject\n# ----------------------------------------------------------------------------\n\n${sourceGitIgnore}`;\n}\n\n/**\n * Some packages are not configured automatically on eject and may require\n * users to add some code, eg: to their AppDelegate.\n */\nasync function warnIfDependenciesRequireAdditionalSetupAsync(projectRoot: string): Promise<void> {\n  // We just need the custom `nodeModulesPath` from the config.\n  const { exp, pkg } = getConfig(projectRoot, {\n    skipSDKVersionRequirement: true,\n  });\n\n  const pkgsWithExtraSetup = await JsonFile.readAsync(\n    resolveModule('expo/requiresExtraSetup.json', projectRoot, exp)\n  );\n  const packagesToWarn: string[] = Object.keys(pkg.dependencies).filter(\n    pkgName => pkgName in pkgsWithExtraSetup\n  );\n\n  if (packagesToWarn.length === 0) {\n    return;\n  }\n\n  log.newLine();\n  const warnAdditionalSetupStep = CreateApp.logNewSection(\n    'Checking if any additional setup steps are required for installed SDK packages.'\n  );\n\n  const plural = packagesToWarn.length > 1;\n\n  warnAdditionalSetupStep.stopAndPersist({\n    symbol: '⚠️ ',\n    text: chalk.red(\n      `Your app includes ${chalk.bold(`${packagesToWarn.length}`)} package${\n        plural ? 's' : ''\n      } that require${plural ? '' : 's'} additional setup in order to run:`\n    ),\n  });\n\n  packagesToWarn.forEach(pkgName => {\n    log.nested(`- ${chalk.bold(pkgName)}: ${pkgsWithExtraSetup[pkgName]}`);\n  });\n}\n\nexport function stripDashes(s: string): string {\n  return s.replace(/\\s|-/g, '');\n}\n\n/**\n * Returns true if the input string matches the default expo main field.\n *\n * - ./node_modules/expo/AppEntry\n * - ./node_modules/expo/AppEntry.js\n * - node_modules/expo/AppEntry.js\n * - expo/AppEntry.js\n * - expo/AppEntry\n *\n * @param input package.json main field\n */\nexport function isPkgMainExpoAppEntry(input?: string): boolean {\n  const main = input || '';\n  if (main.startsWith('./')) {\n    return main.includes('node_modules/expo/AppEntry');\n  }\n  return main.includes('expo/AppEntry');\n}\n"],"file":"Eject.js"}